---
title: "index"
author: "Amanda Whitmire"
date: "11/30/2017"
output: 
  html_document:
    code_folding: hide
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
```

## scatterplot

```{r scatterplot}
ggplot(data = mpg, aes(x = displ, y = hwy)) + 
  geom_point()
```

### 'color'

```{r color}
ggplot(data = mpg, aes(x = displ, y = hwy)) + 
  geom_point((aes(color = class)))
```

### 'shape': but need a B&W figure

Changed 'color' to 'shape'

```{r b&w}
ggplot(data = mpg, aes(x = displ, y = hwy)) + 
  geom_point((aes(shape = class)))
```

```{r size}
ggplot(data = mpg, aes(x = cty, y = hwy, size = class, color = fl))+ 
  geom_point(alpha = 0.2)
```

```{r fix color}

ggplot(data = mpg, aes(x = cty, y = hwy, size = class))+ 
  geom_point(alpha = 0.2, color = "blue")
```

## Exercises

```{r ex 5.5.2}

ggplot(data = mpg, aes(x = displ, y = hwy, color = cty))+ 
  geom_point(alpha = 0.4)
```

```{r ex 5.5.4}

ggplot(data = mpg, aes(x = displ, y = hwy, color = displ <5))+ 
  geom_point()
```

## Geoms

```{r geom_examples}

ggplot(mpg, aes(x = drv, y = hwy)) +
  geom_violin()

```

## Multiple geoms

```{r mult_geoms}

ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point(aes(x=displ, y=hwy)) +
  geom_smooth(aes(x=displ, y=hwy))

```



## Customization

```{r customize}

ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  geom_smooth() +
  labs(title = "Realtionship b/w engine size & MPG",
       x = "Highway MPG",
       y = "Engine Displacement (liters)") +
  theme_bw() +
  theme(text = element_text(size = 16))

```

## Data Wrangling with `dplyr`

```{r}

gapminder <- readr::read_csv("https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv")

gapminder

## useful functions to get to know your data:
head(gapminder) # show the first 6 rows of the data
tail(gapminder) #show the last six rows of the data

head(gapminder, 10) #say how many!
tail(gapminder, 9)

## check out the structure of your data
str(gapminder) 

## column headers
names(gapminder) 

## dimensions of the data
dim(gapminder)
ncol(gapminder)
nrow(gapminder)

#combine with c()
c(nrow(gapminder),ncol(gapminder)) #concatenate

## summary statistics
summary(gapminder)

## For everything above, we were operating on the entire `gapminder` dataset.

head(gapminder$lifeExp)
```

`read_csv` is from the `readr` package (part of the tidyverse). It is NOT `read.csv`, which is part of base R. 

## Actually working with `dplyr`

filter
```{r}

filter(gapminder, lifeExp < 29)

filter(gapminder, country == "Mexico")

swed <- filter(gapminder, country == "Sweden")
life_swed <- mean(swed$lifeExp)

## pipe operator `%>%` 
 
gapminder %>% head(3)

## let's use the %>% with our Sweden example
gapminder %>% 
  filter(country == "Sweden") %>% 
  summarize(mean_lifeExp = mean(lifeExp))



```

